import { PullRequest } from '../types';

// Pure function to extract PR info
export const extractPRInfo = (pr: PullRequest): {
  number: number;
  headSha: string;
  baseSha: string;
  headRef: string;
  baseRef: string;
  author: string;
} => {
  return {
    number: pr.number,
    headSha: pr.head.sha,
    baseSha: pr.base.sha,
    headRef: pr.head.ref,
    baseRef: pr.base.ref,
    author: pr.user.login
  };
};

// Pure function to format review body
export const formatReviewBody = (
  model: string,
  totalTokens: { input: number; output: number },
  commentCount: number
): string => {
  const tokenInfo = `**Tokens used:** ${totalTokens.input + totalTokens.output} (${totalTokens.input} input + ${totalTokens.output} output)`;
  const modelInfo = `**Model:** ${model}`;
  const commentInfo = `**Comments:** ${commentCount}`;
  
  return `## ğŸ¤– AI Code Review\n\n${modelInfo}\n${tokenInfo}\n${commentInfo}\n\n---\n\n*This review was generated by bad-buggy AI code reviewer.*`;
};

// Pure function to create review comment
export const createReviewComment = (path: string, line: number, body: string): {
  path: string;
  line: number;
  body: string;
} => {
  return {
    path,
    line,
    body
  };
};